<!doctype html><html><head><meta charset=utf-8><title>Which is better Azure App Gateway or Nginx configured on Azure VMs ðŸ¤œ ðŸ¤›</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://AceTheOps.com/plugins/slick/slick.css><link rel=stylesheet href=https://AceTheOps.com/plugins/slick/slick-theme.css><link rel=stylesheet href=https://AceTheOps.com/plugins/font-awesome/css/font-awesome.min.css><link rel=stylesheet href=https://AceTheOps.com/plugins/magnafic-popup/magnific-popup.css><link href=https://AceTheOps.com/scss/style.min.css rel=stylesheet><link rel="shortcut icon" href=https://AceTheOps.com/images/favicon.ico type=image/x-icon><link rel=icon href=https://AceTheOps.com/images/favicon.png type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-FCQTR1NVY6"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FCQTR1NVY6")</script></head><body><nav class="navbar navbar-expand-lg fixed-top"><div class=container><a href=https://AceTheOps.com/ class=navbar-brand><img src=https://AceTheOps.com/images/site-navigation/logo.png alt=site-logo></a>
<button type=button class="navbar-toggler collapsed" data-toggle=collapse data-target=#navbarCollapse>
<span class=navbar-toggler-icon></span>
<span class=navbar-toggler-icon></span>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-between" id=navbarCollapse><ul class="nav navbar-nav main-navigation my-0 mx-auto"><li class=nav-item><a href=https://AceTheOps.com/#home class="nav-link text-dark text-sm-center p-2">Home</a></li><li class=nav-item><a href=https://AceTheOps.com/#about class="nav-link text-dark text-sm-center p-2">About</a></li><li class=nav-item><a href=https://AceTheOps.com/#service class="nav-link text-dark text-sm-center p-2">Service</a></li><li class=nav-item><a href=https://AceTheOps.com/#portfolio class="nav-link text-dark text-sm-center p-2">Work</a></li><li class=nav-item><a href=https://AceTheOps.com/#resume class="nav-link text-dark text-sm-center p-2">Resume</a></li><li class=nav-item><a href=https://AceTheOps.com/#skills class="nav-link text-dark text-sm-center p-2">Skills</a></li><li class=nav-item><a href=https://AceTheOps.com/#contact class="nav-link text-dark text-sm-center p-2">Contact</a></li></ul><div class=navbar-nav><a href=https://AceTheOps.com/blog class="btn btn-primary btn-zoom hire_button">Blog</a></div></div></div></nav><div id=content><header class=breadCrumb><div class=container><div class=row><div class="col-lg-10 col-md-12 offset-lg-1 offset-md-0 text-center"><h3 class=breadCrumb__title>Which is better Azure App Gateway or Nginx configured on Azure VMs ðŸ¤œ ðŸ¤›</h3><nav aria-label=breadcrumb class="d-flex justify-content-center"><ol class="breadcrumb align-items-center"><li class=breadcrumb-item><a href=https://AceTheOps.com/>Home</a></li><li class=breadcrumb-item><a href=https://AceTheOps.com/blog>All Post</a></li><li class="breadcrumb-item active" aria-current=page>Which is better Azure App Gateway or Nginx configured on Azure VMs ðŸ¤œ ðŸ¤›</li></ol></nav></div></div><ul class=post-meta><li><i class="fa fa-calendar"></i>
December 5, 2021</li><li><i class="fa fa-clock-o"></i>
7 mins read</li><li><i class="fa fa-tag"></i>
<a class=text-capitalize href=https://AceTheOps.com/tags/cloud_native/>Cloud_Native</a>
<a class=text-capitalize href=https://AceTheOps.com/tags/appgateway/>appgateway</a>
<a class=text-capitalize href=https://AceTheOps.com/tags/cloud/>Cloud</a>
<a class=text-capitalize href=https://AceTheOps.com/tags/nginx/>nginx</a>
<a class=text-capitalize href=https://AceTheOps.com/tags/arm_template/>arm_template</a></li><li><i class="fa fa-folder-open"></i>
<a class=text-capitalize href=https://AceTheOps.com/categories/blog/>blog</a></li></ul></div></div></div></div></header><section class="section singleBlog"><div class=svg-img><img src=https://AceTheOps.com/images/hero/figure-svg.svg alt></div><div class=animate-shape><img src=https://AceTheOps.com/images/skill/skill-background-shape.svg alt><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 600 600"><defs><linearGradient id="d" x1=".929" y1=".111" x2=".263" y2=".935" gradientUnits="objectBoundingBox"><stop offset="0" stop-color="#f1f6f9"/><stop offset="1" stop-color="#f1f6f9" stop-opacity="0"/></linearGradient></defs><g data-name="blob-shape (3)"><path class="blob" fill="url(#d)" d="M455.4 151.1c43.1 36.7 73.4 92.8 60.8 136.3-12.7 43.5-68.1 74.4-111.3 119.4-43.1 45-74 104.1-109.8 109-35.9 5-76.7-44.2-111.8-89.2-35.2-45-64.7-85.8-70.8-132.6-6-46.8 11.6-99.6 46.7-136.3 35.2-36.6 88-57.2 142.4-58.8 54.5-1.7 110.6 15.6 153.8 52.2z"/></g></svg></div><div class=animate-pattern><img src=https://AceTheOps.com/images/service/background-pattern.svg alt=background-shape></div><div class=container><div class=row><div class=col-lg-12><div class=singleBlog__feature><img src=https://AceTheOps.com/ alt=feature-image></div></div></div><div class="row mt-5"><div class=col-lg-12><div class=singleBlog__content><p>Azure Application Gateway is a web traffic load balancer that enables you to manage traffic to your web applications. It includes features such as SSL/TLS offload, HTTP/HTTPS redirection, and cookie-based affinity.</p><p>Nginx is an open-source web server that can also be used as a reverse proxy, load balancer, and HTTP cache. When running Nginx on an Azure Virtual Machine (VM), you have the ability to customize the configuration and install additional modules to suit your needs.</p><p>Here are some key differences between Azure Application Gateway and Nginx running on an Azure VM:</p><ol><li>Managed service vs. self-managed:</li></ol><p>Azure Application Gateway is a fully managed service, while Nginx running on an Azure VM requires you to set up and manage the VM and web server software yourself. This means that with Azure Application Gateway, you don&rsquo;t have to worry about patching, updating, or maintaining the underlying infrastructure.</p><ol start=2><li>Scaling:</li></ol><p>Both Azure Application Gateway and Nginx running on an Azure VM can scale to meet the needs of your application. However, with Azure Application Gateway, you can enable auto-scaling based on metrics such as CPU utilization, while with Nginx on an Azure VM, you would have to manually scale the VM or set up auto-scaling using a solution such as Azure Monitor.</p><ol start=3><li>Performance:</li></ol><p>Azure Application Gateway is optimized for high performance, with features such as multiplexing and HTTP/2 support to improve the speed of web traffic. Nginx can also be configured for high performance, but you will need to tune the configuration and possibly use additional tools such as a cache to achieve optimal performance.</p><ol start=4><li>Features:</li></ol><p>Azure Application Gateway includes a range of features beyond load balancing, such as SSL/TLS offload, which allows you to offload encryption and decryption tasks to the gateway, improving the performance of your backend servers. Nginx can also be configured to provide these features, but you will need to set them up yourself.</p><p>Here is an example of configuring Azure Application Gateway to load balance traffic to two backend servers using the Azure Portal:</p><ol><li><p>In the Azure Portal, navigate to your Application Gateway resource.</p></li><li><p>Click on &ldquo;Backend pools&rdquo; in the left-hand menu.</p></li><li><p>Click the &ldquo;+ Add&rdquo; button to create a new backend pool.</p></li><li><p>Give the backend pool a name, such as &ldquo;MyBackendPool&rdquo;, and select the type of backend servers you want to use (e.g., Azure VMs).</p></li><li><p>Click the &ldquo;+ Add&rdquo; button to add the backend servers to the pool. You can add multiple servers by repeating this step.</p></li><li><p>Click &ldquo;Save&rdquo; to create the backend pool.</p></li><li><p>Click on &ldquo;Listeners&rdquo; in the left-hand menu.</p></li><li><p>Click the &ldquo;+ Add&rdquo; button to create a new listener.</p></li><li><p>Give the listener a name, such as &ldquo;MyListener&rdquo;, and select the protocol and port you want to use (e.g., HTTP on port 80).</p></li><li><p>Select the backend pool you created in step 3 as the target for the listener.</p></li><li><p>Click &ldquo;Save&rdquo; to create the listener.</p></li></ol><p>This is a basic example of how to set up load balancing with Azure Application Gateway. You can configure additional options, such as SSL/TLS offload, by clicking on the corresponding settings in the left-hand menu.</p><p>To deploy an Azure Application Gateway using the Azure CLI, you can use the az network application-gateway create command. This command requires the following arguments:</p><p>&ndash;name: The name of the Application Gateway.
&ndash;resource-group: The name of the resource group to create the Application Gateway in.
&ndash;location: The location to create the Application Gateway in.
&ndash;sku: The SKU of the Application Gateway.
Here is an example of how to use the az network application-gateway create command to create a basic Application Gateway:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az network application-gateway create <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --name myAppGateway <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --resource-group myResourceGroup <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --location eastus <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --sku Standard_v2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --instance-count <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --backend-address-pools <span style=color:#e6db74>&#34;name=myBackendPool addresses=10.0.0.1 10.0.0.2&#34;</span>
</span></span></code></pre></div><p>This command creates an Application Gateway with two instances and a backend pool with two addresses.</p><p>You can find more information about the az network application-gateway create command and the available options in the Azure CLI documentation <a href="https://docs.microsoft.com/en-us/cli/azure/network/application-gateway/create?view=azure-cli-latest">https://docs.microsoft.com/en-us/cli/azure/network/application-gateway/create?view=azure-cli-latest</a></p><p>Here is an example of configuring Nginx as a load balancer on an Azure VM using the command line:</p><ol><li><p>Install Nginx on your Azure VM. This can be done using the package manager for your operating system (e.g., apt-get on Ubuntu).</p></li><li><p>Create a configuration file for Nginx, typically located at /etc/nginx/nginx.conf.</p></li><li><p>In the configuration file, define the upstream servers that Nginx should load balance traffic to. For example:</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>upstream</span> <span style=color:#960050;background-color:#1e0010>my_upstream</span> {
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>server</span> <span style=color:#960050;background-color:#1e0010>backend1.example.com;</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>server</span> <span style=color:#960050;background-color:#1e0010>backend2.example.com;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>Define a virtual server block in the configuration file to specify how Nginx should handle incoming traffic. For example:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>server</span> {
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>listen</span> <span style=color:#960050;background-color:#1e0010>80;</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>server_name</span> <span style=color:#960050;background-color:#1e0010>example.com;</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>location</span> <span style=color:#960050;background-color:#1e0010>/</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>proxy_pass</span> <span style=color:#960050;background-color:#1e0010>http:</span><span style=color:#75715e>//my_upstream;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=5><li>Restart Nginx to apply the changes:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl restart nginx
</span></span></code></pre></div><p>This is a basic example of how to set up Nginx as a load balancer on an Azure VM. You can configure additional options, such as SSL/TLS offload, by adding additional directives to the configuration file.</p><h2 id=cost-efficiency>Cost Efficiency</h2><p>There are a few different factors to consider when comparing the cost of using Azure Application Gateway versus using Nginx as a load balancer on an Azure virtual machine (VM). Some of these factors include the number of requests and data transfer that the load balancer will need to handle, the number of VMs or other resources that the load balancer will be distributing traffic to, and the specific pricing options and discounts that you are eligible for.</p><p>One way to compare the cost of these two options is to use the Azure pricing calculator. This tool allows you to input specific details about your workload, such as the number of requests and data transfer, and see an estimated cost for each option.</p><p>Generally, Azure Application Gateway is a fully managed service that is designed to handle a large volume of traffic and is well-suited for high-scale applications. As a result, it may be more expensive than using Nginx as a load balancer on an Azure VM, especially if you are only handling a small volume of traffic.</p><p>However, there are a few other factors to consider when comparing the cost of these two options. For example, using Azure Application Gateway may be more cost-effective in the long run because it is fully managed and requires minimal maintenance, whereas using Nginx as a load balancer on an Azure VM may require ongoing maintenance and management. Additionally, Azure Application Gateway includes features such as SSL offloading and web application firewall (WAF) capabilities, which may justify the additional cost for some users.</p><p>The cost of running an Nginx load balancer on an Azure virtual machine (VM) will depend on several factors, including the VM size, region, and configuration.</p><p>Here are some estimates based on Azure&rsquo;s pricing calculator:</p><ol><li>For a Basic A1 VM (1 vCPU, 1 GB RAM) in the East US region, the cost would be approximately $32.63 per month.</li><li>For a Standard A2 VM (2 vCPUs, 3.5 GB RAM) in the East US region, the cost would be approximately $65.25 per month.</li><li>For a Standard D4s_v3 VM (4 vCPUs, 16 GB RAM) in the East US region, the cost would be approximately $130.50 per month.</li></ol><p>Keep in mind that these estimates do not include any additional costs for data transfer, storage, or other resources that may be required for your load balancer setup. It&rsquo;s always a good idea to carefully review your costs and adjust your configuration as needed to optimize your budget.</p><p>It&rsquo;s also worth noting that Azure offers a variety of pricing options for both Azure Application Gateway and Azure VMs, including pay-as-you-go, consumption-based, and reserved pricing options. You can use the Azure pricing calculator to compare the cost of each option based on your specific workload and usage patterns.</p><p>In summary, Azure Application Gateway is a fully managed service that provides a range of features for load balancing and managing web traffic, while Nginx on an Azure VM gives you more control and customization options but requires more setup and management.
Which option is best for you will depend on your specific requirements and preferences.</p></div></div></div></div></section></div><section class=footer id=contact><div class=footer__background_shape><svg viewBox="0 0 1920 79"><path d="M0 0h1920v79L0 0z" data-name="Path 1450"/></svg></div><div class=container><div class=row><div class=col-lg-12><div class=footer__cta><div class=shape-1><svg xmlns="http://www.w3.org/2000/svg" width="357" height="315.029" viewBox="0 0 357 315.029"><path data-name="Path 1449" d="M76.1-157.222C91.746-135.8 87.2-94.273 99.993-61.945c12.7 32.328 42.661 55.459 39.248 73.282-3.318 17.823-40.007 30.337-65.6 43.325-25.5 12.988-39.912 26.545-60.01 42.566-20.1 16.116-46.074 34.6-63.328 27.682-17.349-6.921-25.976-39.153-59.915-59.82s-93.1-29.768-105.325-51.478 22.373-56.028 43.609-93.949c21.331-37.921 29.2-79.35 53.563-96.793 24.459-17.444 65.414-10.9 103.9-6.921 38.396 3.982 74.326 5.404 89.965 26.829z" transform="translate(217.489 188.626)"/></svg></div><div class=shape-2><svg xmlns="http://www.w3.org/2000/svg" width="357" height="315.029" viewBox="0 0 357 315.029"><path data-name="Path 1449" d="M76.1-157.222C91.746-135.8 87.2-94.273 99.993-61.945c12.7 32.328 42.661 55.459 39.248 73.282-3.318 17.823-40.007 30.337-65.6 43.325-25.5 12.988-39.912 26.545-60.01 42.566-20.1 16.116-46.074 34.6-63.328 27.682-17.349-6.921-25.976-39.153-59.915-59.82s-93.1-29.768-105.325-51.478 22.373-56.028 43.609-93.949c21.331-37.921 29.2-79.35 53.563-96.793 24.459-17.444 65.414-10.9 103.9-6.921 38.396 3.982 74.326 5.404 89.965 26.829z" transform="translate(217.489 188.626)"/></svg></div><div class="text-light footer__cta_content"><span>Contact me</span><h2 class=mb-0>Letâ€™s Start a Project</h2></div><div class=footer__cta_action><a class="btn btn-light btn-zoom" href=https://AceTheOps.com/contact>Get in
touch</a></div></div></div></div><div class="row footer__widget"><div class=col-lg-4><div class="footer__widget_logo mb-5"><img src=https://AceTheOps.com/images/contact/widget-logo.png style=width:400px alt=widget-logo></div></div><div class=col-lg-4 style=margin-left:100px><div class="text-light footer__widget_address mb-5"><h4 class=base-font>Sitemap</h4><ul class="unstyle-list small"><li class=mb-2><a class=text-light href=https://AceTheOps.com/about>About me</a></li><li class=mb-2><a class=text-light href=https://AceTheOps.com/>Frequently Ask Question</a></li><li class=mb-2><a class=text-light href=https://AceTheOps.com/>Privacy & Policy</a></li><li class=mb-2><a class=text-light href=https://AceTheOps.com/>Latest Article</a></li></ul><h4 class=base-font>Address</h4><ul class="fa-ul small"><li class=mb-2><a class=text-light href=tel:><span class=fa-li><i class="fa fa-phone"></i></span></a></li><li class=mb-2><a class=text-light href=mailto:aakriti@acetheops.com><span class=fa-li><i class="fa fa-envelope"></i></span>aakriti@acetheops.com</a></li><li class=mb-2><span class=fa-li><i class="fa fa-map-marker"></i></span>23 Khan Niketon, Grand Street, NYK.</a></li></ul></div></div></div><div class="row footer__footer"><div class=col-lg-6><div class="footer__footer_copy text-light"><p>Copyright 2023 - All Rights Reserved by <a class=text-light href=https://AceTheOps.com/ target=_blank>AceTheOps</a></p></div></div><div class=col-lg-6><div class=footer__footer_social><ul class=unstyle-list><li class="d-inline-block mx-2"><a class=text-light target=_blank href=https://www.facebook.com/><i class="fa fa-facebook-official"></i></a></li><li class="d-inline-block mx-2"><a class=text-light target=_blank href=https://www.linkedin.com/><i class="fa fa-linkedin-square"></i></a></li><li class="d-inline-block mx-2"><a class=text-light target=_blank href=https://www.pinterest.com/><i class="fa fa-pinterest-square"></i></a></li><li class="d-inline-block mx-2"><a class=text-light target=_blank href=https://twitter.com/><i class="fa fa-twitter-square"></i></a></li></ul></div></div></div></div></section><script src="https://maps.googleapis.com/maps/api/js?key=YOUR%20GOOGLE%20MAP%20API&libraries=geometry"></script>
<script src=https://AceTheOps.com/plugins/jQuery/jquery.min.js></script>
<script src=https://AceTheOps.com/plugins/bootstrap/bootstrap.min.js></script>
<script src=https://AceTheOps.com/plugins/slick/slick.min.js></script>
<script src=https://AceTheOps.com/plugins/waypoint/jquery.waypoints.min.js></script>
<script src=https://AceTheOps.com/plugins/magnafic-popup/jquery.magnific-popup.min.js></script>
<script src=https://AceTheOps.com/plugins/tweenmax/TweenMax.min.js></script>
<script src=https://AceTheOps.com/plugins/imagesloaded/imagesloaded.min.js></script>
<script src=https://AceTheOps.com/plugins/masonry/masonry.min.js></script>
<script src=https://AceTheOps.com/js/script.min.js></script></body></html>